<!doctype html><html lang=zh><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>关于vue-router的props传值的一次有趣记录 | 9995空间</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="正文
在开发新组件时测试出一个有趣的现象，现在记录一下。
有一个完整的页面组件Crud.vue及其props参数的配置文件ProductLabeling.js，使用vue-router的props传值，能正常展示数据（如图）。"><meta name=generator content="Hugo 0.147.6"><meta name=robots content="noindex, nofollow"><meta name=author content="Miantu"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=http://localhost:1313/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/><meta property="og:url" content="http://localhost:1313/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/"><meta property="og:site_name" content="9995空间"><meta property="og:title" content="关于vue-router的props传值的一次有趣记录"><meta property="og:description" content="正文 在开发新组件时测试出一个有趣的现象，现在记录一下。
有一个完整的页面组件Crud.vue及其props参数的配置文件ProductLabeling.js，使用vue-router的props传值，能正常展示数据（如图）。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-27T12:42:25+08:00"><meta property="article:modified_time" content="2022-07-27T12:42:25+08:00"><meta property="article:tag" content="Vue"><meta itemprop=name content="关于vue-router的props传值的一次有趣记录"><meta itemprop=description content="正文 在开发新组件时测试出一个有趣的现象，现在记录一下。
有一个完整的页面组件Crud.vue及其props参数的配置文件ProductLabeling.js，使用vue-router的props传值，能正常展示数据（如图）。"><meta itemprop=datePublished content="2022-07-27T12:42:25+08:00"><meta itemprop=dateModified content="2022-07-27T12:42:25+08:00"><meta itemprop=wordCount content="171"><meta itemprop=keywords content="Vue"><meta name=twitter:card content="summary"><meta name=twitter:title content="关于vue-router的props传值的一次有趣记录"><meta name=twitter:description content="正文 在开发新组件时测试出一个有趣的现象，现在记录一下。
有一个完整的页面组件Crud.vue及其props参数的配置文件ProductLabeling.js，使用vue-router的props传值，能正常展示数据（如图）。"></head><body class="ma0 avenir bg-near-white development"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l center items-center justify-between"><a href=/ class="f3 fw2 hover-white white-90 dib no-underline">9995空间</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/posts/ title="文章 页">文章</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/travel/ title="游记 页">游记</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/categories/ title="栏目 页">栏目</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l mw8 center ph3 flex-wrap justify-between"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">关于vue-router的props传值的一次有趣记录</h1><p class=tracked><strong>Miantu</strong></p><time class="f6 mv4 dib tracked" datetime=2022-07-27T12:42:25+08:00>七月 27, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=正文>正文</h2><p>在开发新组件时测试出一个有趣的现象，现在记录一下。</p><p>有一个完整的页面组件Crud.vue及其props参数的配置文件ProductLabeling.js，使用vue-router的props传值，能正常展示数据（如图）。</p><p><img src=/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/1.jpg alt></p><p>创建一个File.vue的空白组件，包含Crud.vue，此时File组件没有定义任何的props，但是props的值被传递给Crud.vue组件的props(如图)。
<img src=/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/2.jpg alt>
File.vue,代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ComponentInternalInstance</span>, <span style=color:#a6e22e>getCurrentInstance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Crud</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../../crud/Index.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>instance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getCurrentInstance</span>() <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>ComponentInternalInstance</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// const props = defineProps(
</span></span></span><span style=display:flex><span><span style=color:#75715e>//     {
</span></span></span><span style=display:flex><span><span style=color:#75715e>//         data: {
</span></span></span><span style=display:flex><span><span style=color:#75715e>//             type: Array,
</span></span></span><span style=display:flex><span><span style=color:#75715e>//             default: [],
</span></span></span><span style=display:flex><span><span style=color:#75715e>//         },
</span></span></span><span style=display:flex><span><span style=color:#75715e>//     }
</span></span></span><span style=display:flex><span><span style=color:#75715e>// )
</span></span></span><span style=display:flex><span><span style=color:#75715e>// console.log(props)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>instance</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Crud</span>&gt;&lt;/<span style=color:#f92672>Crud</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt; 
</span></span></code></pre></div><p>测试其他情况：</p><ol><li>在File.vue组件定义接收的props,会干扰往下传播的props的值，但是不会阻断这个行为（如图）。
<img src=/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/3.jpg alt>
代码如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ComponentInternalInstance</span>, <span style=color:#a6e22e>getCurrentInstance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Crud</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../../crud/Index.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>instance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getCurrentInstance</span>() <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>ComponentInternalInstance</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>(
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>props</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>instance</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Crud</span>&gt;&lt;/<span style=color:#f92672>Crud</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt; 
</span></span></code></pre></div><ol start=2><li>修改template，增加一些其他显示，完全阻断这个现象（如图）。
<img src=/posts/2022/07/%E5%85%B3%E4%BA%8Evue-router%E7%9A%84props%E4%BC%A0%E5%80%BC%E7%9A%84%E4%B8%80%E6%AC%A1%E6%9C%89%E8%B6%A3%E8%AE%B0%E5%BD%95/4.png alt>
代码如下：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ComponentInternalInstance</span>, <span style=color:#a6e22e>getCurrentInstance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Crud</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../../crud/Index.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>instance</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getCurrentInstance</span>() <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>ComponentInternalInstance</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// const props = defineProps(
</span></span></span><span style=display:flex><span><span style=color:#75715e>//     {
</span></span></span><span style=display:flex><span><span style=color:#75715e>//         data: {
</span></span></span><span style=display:flex><span><span style=color:#75715e>//             type: Array,
</span></span></span><span style=display:flex><span><span style=color:#75715e>//             default: [],
</span></span></span><span style=display:flex><span><span style=color:#75715e>//         },
</span></span></span><span style=display:flex><span><span style=color:#75715e>//     }
</span></span></span><span style=display:flex><span><span style=color:#75715e>// )
</span></span></span><span style=display:flex><span><span style=color:#75715e>// console.log(props)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>instance</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span>&gt;<span style=color:#a6e22e>测试</span>&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Crud</span>&gt;&lt;/<span style=color:#f92672>Crud</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt; 
</span></span></code></pre></div><p>这里贴一下路由的传值方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/productLabeling&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>File</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ProductLabeling</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}, 
</span></span></code></pre></div><p>写vue3也有一段时间，这个现象完全超出理解的范畴，感觉更像一个BUG。</p><p>当然有时我们也想要这个功能把父组件的props完全传递到子组件，但是大部分时间我们都不需要。</p><p>通过dev-tool也确定了props数据的传递。使用vue-router传值的props成为了File.vue组件的attrs,而往下传递给Crud.vue组件时，则是实打实的通过props传递进去。</p><p>可能template只有一个组件的情况下，衍生出一种类似继承的关系吧（笑）。</p><p>网上搜索了一下也没有找到相关的资料，只能单纯记录一下，如果有人能解释这种传值的逻辑欢迎留言讨论。</p><hr><h2 id=补充>补充</h2><p>06.02.03补充</p><p>后面在官网翻查了很久资料，发现这是vue组件的一种继承行为，当不定义任何props时，就会出现此种情况。</p><ul class=pa0><li class="list di"><a href=/tags/vue/ class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Vue</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">这个posts中有</p><nav id=TableOfContents><ul><li><a href=#正文>正文</a></li><li><a href=#补充>补充</a></li></ul></nav></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href=http://localhost:1313/>&copy; 9995空间 2026</a><div><div class=ananke-socials></div></div></div></footer></body></html>