<!doctype html><html lang=zh><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Yii2使用官方docker方案 | 9995空间</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Yii2是拥有自家的docker解决方案的，但是国内的资料甚少。可能是因为官方镜像出的比较晚，国内大部分是使用私人的镜像。其实，官方的镜像一直在维护，不过名气不大，dockerhub的下载数也只有5K+。"><meta name=generator content="Hugo 0.147.6"><meta name=robots content="noindex, nofollow"><meta name=author content="Miantu"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=http://localhost:1313/posts/2022/07/yii2%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9docker%E6%96%B9%E6%A1%88/><meta property="og:url" content="http://localhost:1313/posts/2022/07/yii2%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9docker%E6%96%B9%E6%A1%88/"><meta property="og:site_name" content="9995空间"><meta property="og:title" content="Yii2使用官方docker方案"><meta property="og:description" content="Yii2是拥有自家的docker解决方案的，但是国内的资料甚少。可能是因为官方镜像出的比较晚，国内大部分是使用私人的镜像。其实，官方的镜像一直在维护，不过名气不大，dockerhub的下载数也只有5K+。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-01T20:41:01+08:00"><meta property="article:modified_time" content="2022-07-01T20:41:01+08:00"><meta property="article:tag" content="Yii"><meta itemprop=name content="Yii2使用官方docker方案"><meta itemprop=description content="Yii2是拥有自家的docker解决方案的，但是国内的资料甚少。可能是因为官方镜像出的比较晚，国内大部分是使用私人的镜像。其实，官方的镜像一直在维护，不过名气不大，dockerhub的下载数也只有5K+。"><meta itemprop=datePublished content="2022-07-01T20:41:01+08:00"><meta itemprop=dateModified content="2022-07-01T20:41:01+08:00"><meta itemprop=wordCount content="53"><meta itemprop=keywords content="Yii"><meta name=twitter:card content="summary"><meta name=twitter:title content="Yii2使用官方docker方案"><meta name=twitter:description content="Yii2是拥有自家的docker解决方案的，但是国内的资料甚少。可能是因为官方镜像出的比较晚，国内大部分是使用私人的镜像。其实，官方的镜像一直在维护，不过名气不大，dockerhub的下载数也只有5K+。"></head><body class="ma0 avenir bg-near-white development"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l center items-center justify-between"><a href=/ class="f3 fw2 hover-white white-90 dib no-underline">9995空间</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/posts/ title="文章 页">文章</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/travel/ title="游记 页">游记</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/categories/ title="栏目 页">栏目</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l mw8 center ph3 flex-wrap justify-between"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Yii2使用官方docker方案</h1><p class=tracked><strong>Miantu</strong></p><time class="f6 mv4 dib tracked" datetime=2022-07-01T20:41:01+08:00>七月 1, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Yii2是拥有自家的docker解决方案的，但是国内的资料甚少。可能是因为官方镜像出的比较晚，国内大部分是使用私人的镜像。其实，官方的镜像一直在维护，不过名气不大，dockerhub的下载数也只有5K+。</p><h2 id=优点>优点</h2><p>使用官方镜像的优点，肯定就是拿来即用。但是如果跟不上官方程序员的思维估计也是用不上，因为官方的资料很少，文档也很简单基本都是英文。</p><p>以下是YII中国的介绍，也是寥寥数字。看了也没有搞明白。</p><p><a href=https://www.yiichina.com/doc/guide/2.0/tutorial-docker>https://www.yiichina.com/doc/guide/2.0/tutorial-docker</a></p><p>官方镜像目前在维护的版本是php 7.4 &ndash; 8.1,省去了调试php的版本问题。镜像内带的php插件也是很丰富的，在官方dokcer上还有扩展一些常用扩展的例子（ <a href=https://github.com/yiisoft/yii2-docker/blob/master/docs/install-extensions.md>https://github.com/yiisoft/yii2-docker/blob/master/docs/install-extensions.md</a> ）。</p><h2 id=简要使用方法>简要使用方法</h2><ol><li><p>安装docker环境</p></li><li><p>安装docker compose。注意：目前最新版本是V2.6.1(发布地址： <a href=https://github.com/docker/compose/releases>https://github.com/docker/compose/releases</a> )。a.使用脚本安装，请务必修改版本号，不然安装的是V2.4.1。代码如下：</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -L https://get.daocloud.io/docker/compose/releases/download/v2.4.1/docker-compose-<span style=color:#e6db74>`</span>uname -s<span style=color:#e6db74>`</span>-<span style=color:#e6db74>`</span>uname -m<span style=color:#e6db74>`</span> &amp;gt; /usr/local/bin/docker-composeb.  
</span></span></code></pre></div><p>授权执行权限：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo chmod +x /usr/local/bin/docker-composec.创建软连接sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-composed.
</span></span></code></pre></div><p>测试是否成功</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker-compose --version
</span></span></code></pre></div><p>参考地址：https://m.runoob.com/docker/docker-compose.html</p><ol start=3><li>准备好一个YII2的项目。如图：
<img src=/posts/2022/07/yii2%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9docker%E6%96%B9%E6%A1%88/80308344b3a5f23ebd8a2938d9235e9bb7215a1a.png alt="Yii2 高级版本结构图"></li></ol><p>编辑根目录的docker-compose.yml，这里定义了启动服务的依赖和先后顺序，默认是启动</p><p>frontend、backend、mysql 三个服务，请根据个人情况进行调节，ports映射端口请自行调整。</p><p>其中build字段指的是服务构建时Dockerfile文件的目录，如上图会在frontend文件夹内找到，默认使用的是yiisoftware/yii2-php:7.2-apache，php版本较低，请自行修改（查看镜像标签地址： <a href=https://github.com/yiisoft/yii2-docker>https://github.com/yiisoft/yii2-docker</a> ）。</p><ol start=4><li>在当前目录执行</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker-compose up -d
</span></span></code></pre></div><p>执行后，会自行创建出docker-compose.yml上对应的镜像和运行服务。</p><ol start=5><li>进入镜像内进行composer install和php init初始化项目。也可以直接在外层直接初始化。代码会被映射到镜像内的/app文件夹。</li></ol><p>至此完成。</p><ul class=pa0><li class="list di"><a href=/tags/yii/ class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Yii</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">相关內容</p><ul class="pa0 list"><li class=mb2><a href=/posts/2022/02/yii2%E5%9B%BD%E5%86%85composer%E5%AE%89%E8%A3%85%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/>Yii2国内composer安装速度优化</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href=http://localhost:1313/>&copy; 9995空间 2026</a><div><div class=ananke-socials></div></div></div></footer></body></html>