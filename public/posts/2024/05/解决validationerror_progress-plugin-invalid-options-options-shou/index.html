<!doctype html><html lang=zh><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>解决ValidationError: Progress Plugin Invalid Options options shou | 9995空间</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content='在vue-cli4升级到vue-cli5的时候出现这个错误。
详细错误信息如下：
ERROR  ValidationError: Progress Plugin Invalid Options
        options should NOT have additional properties
        options should NOT have additional properties
        options should NOT have additional properties
        options should pass "instanceof" keyword validation
        options should match exactly one schema in oneOf
'><meta name=generator content="Hugo 0.147.6"><meta name=robots content="noindex, nofollow"><meta name=author content="Miantu"><link rel=stylesheet href=/ananke/css/main.min.css><link rel=canonical href=http://localhost:1313/posts/2024/05/%E8%A7%A3%E5%86%B3validationerror_progress-plugin-invalid-options-options-shou/><meta property="og:url" content="http://localhost:1313/posts/2024/05/%E8%A7%A3%E5%86%B3validationerror_progress-plugin-invalid-options-options-shou/"><meta property="og:site_name" content="9995空间"><meta property="og:title" content="解决ValidationError: Progress Plugin Invalid Options options shou"><meta property="og:description" content='在vue-cli4升级到vue-cli5的时候出现这个错误。 详细错误信息如下：
ERROR ValidationError: Progress Plugin Invalid Options options should NOT have additional properties options should NOT have additional properties options should NOT have additional properties options should pass "instanceof" keyword validation options should match exactly one schema in oneOf'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-15T17:22:23+08:00"><meta property="article:modified_time" content="2024-05-15T17:22:23+08:00"><meta property="article:tag" content="Vue"><meta property="article:tag" content="Vuecli"><meta itemprop=name content="解决ValidationError: Progress Plugin Invalid Options options shou"><meta itemprop=description content='在vue-cli4升级到vue-cli5的时候出现这个错误。 详细错误信息如下：
ERROR ValidationError: Progress Plugin Invalid Options options should NOT have additional properties options should NOT have additional properties options should NOT have additional properties options should pass "instanceof" keyword validation options should match exactly one schema in oneOf'><meta itemprop=datePublished content="2024-05-15T17:22:23+08:00"><meta itemprop=dateModified content="2024-05-15T17:22:23+08:00"><meta itemprop=wordCount content="54"><meta itemprop=keywords content="Vue,Vuecli"><meta name=twitter:card content="summary"><meta name=twitter:title content="解决ValidationError: Progress Plugin Invalid Options options shou"><meta name=twitter:description content='在vue-cli4升级到vue-cli5的时候出现这个错误。 详细错误信息如下：
ERROR ValidationError: Progress Plugin Invalid Options options should NOT have additional properties options should NOT have additional properties options should NOT have additional properties options should pass "instanceof" keyword validation options should match exactly one schema in oneOf'></head><body class="ma0 avenir bg-near-white development"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l center items-center justify-between"><a href=/ class="f3 fw2 hover-white white-90 dib no-underline">9995空间</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/posts/ title="文章 页">文章</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/travel/ title="游记 页">游记</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white white-90 no-underline" href=/categories/ title="栏目 页">栏目</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l mw8 center ph3 flex-wrap justify-between"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">解决ValidationError: Progress Plugin Invalid Options options shou</h1><p class=tracked><strong>Miantu</strong></p><time class="f6 mv4 dib tracked" datetime=2024-05-15T17:22:23+08:00>五月 15, 2024</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>在vue-cli4升级到vue-cli5的时候出现这个错误。
详细错误信息如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-TS data-lang=TS><span style=display:flex><span><span style=color:#a6e22e>ERROR</span>  <span style=color:#a6e22e>ValidationError</span>: <span style=color:#66d9ef>Progress</span> <span style=color:#a6e22e>Plugin</span> <span style=color:#a6e22e>Invalid</span> <span style=color:#a6e22e>Options</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span> <span style=color:#a6e22e>should</span> <span style=color:#a6e22e>NOT</span> <span style=color:#a6e22e>have</span> <span style=color:#a6e22e>additional</span> <span style=color:#a6e22e>properties</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span> <span style=color:#a6e22e>should</span> <span style=color:#a6e22e>NOT</span> <span style=color:#a6e22e>have</span> <span style=color:#a6e22e>additional</span> <span style=color:#a6e22e>properties</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span> <span style=color:#a6e22e>should</span> <span style=color:#a6e22e>NOT</span> <span style=color:#a6e22e>have</span> <span style=color:#a6e22e>additional</span> <span style=color:#a6e22e>properties</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span> <span style=color:#a6e22e>should</span> <span style=color:#a6e22e>pass</span> <span style=color:#e6db74>&#34;instanceof&#34;</span> <span style=color:#a6e22e>keyword</span> <span style=color:#a6e22e>validation</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span> <span style=color:#a6e22e>should</span> <span style=color:#a6e22e>match</span> <span style=color:#a6e22e>exactly</span> <span style=color:#a6e22e>one</span> <span style=color:#a6e22e>schema</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>oneOf</span>
</span></span></code></pre></div><h2 id=原因>原因：</h2><p>这是因为webpack的版本与vue-cli5的版本不匹配引起。</p><h2 id=解决办法>解决办法：</h2><p>除了常规的删除node_modules，清除npm缓存（npm cache clean &ndash;force）重新安装外。</p><p>如果问题还是无法解决，</p><p>请排查package.json文件的dependencies项目，笔者在npm update成功的情况下还是出现这个问题，这意味着在npm构建的关系树里存在依赖webpack4的项目。有一部分webpack的插件是同时支持webpack4和webpack5的，这导致升级vue-cli5时如果只是简单地修改package.json的dependencies版本号再进行升级，看起来是稳妥的，实际上webpack的插件和loador可能没有顺利进行升级而出现这个错误的信息。</p><p>笔者的情况是排查dependencies后，发现less-loader的版本过低指向webpack4，所以导致npm update时总是安装webpack4引起与vue-cli5不一致的情况。</p><h2 id=结语>结语</h2><p>此类问题不是什么严重的技术问题，但是因为过于细小也会引起一些小骚动。这个也是工程师除了技术外，需要积累经验才能想到原因吧（踩坑足够多就好了）。</p><ul class=pa0><li class="list di"><a href=/tags/vue/ class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Vue</a></li><li class="list di"><a href=/tags/vuecli/ class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Vuecli</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href=http://localhost:1313/>&copy; 9995空间 2026</a><div><div class=ananke-socials></div></div></div></footer></body></html>